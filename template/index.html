**Structure From Motion**

Student name: Aditya Gaddipati

# Baseline Reconstruction

| View 1 | View 2 |
| ----------- | ----------- |
| <img src="./output/q1_1.png"> | <img src="./output/q1_2.png"> |

<img src="./output/q1_3.png"> 



Implementation details:
1. The first step is to get the inliers from the given noisy correspondances. This is done using RANSAC.
2. Seven points are sampled randomly and the fundamental matrix is obtained using the 7 point algorithm.
3. Next, the number of inlier points are counted for the calculated F matrix.
4. This is repeated for a few iterations until the best inlier points are obtained.
5. Then using the inlier points, the F matrix is obtained from the 8 point algorithm. 
6. Next, the essential matrix E is calculated using the fundamental matrix and the intrinsics.
7. The essential matrix is decomposed using SVD. Assuming canonical form of the first camera, four possible camera matrices are obtained for the second camera as follows:
<img src="./output/q1_4.png"> 
8. The 3D points are triangulted using all four camera configurations and the correct one is chosen based on the maximum number of points that lie in front of both the cameras. 

<br>
# Incremental Structure-from-Motion
| Camera 1 & 2 | Adding Camera 3 | Adding Camera 4 |
| ----------- | ----------- | ----------- |
| <img src="./output/q2-1.gif"> | <img src="./output/q2-2.gif"> | <img src="./output/q2-3.gif">

<img src="./output/q2_4.png"> 

Implementation details:
1. First, we do a baseline reconstruction using cameras 1 & 2. The steps are similar to what was described above.
2. Next, we want to add the camera 3 to the SFM pipeline. To do so, we first find the common correspondances between cameras 1 & 3 and cameras 2 & 3.
3. Using the 3D points of the common correspondances we get the 2D-3D correspondances for camera 3 and calculate its projection matrix.
4. Using the caluculated projection matrix, new points are triangulated between cameras 1 & 3 and cameras 2 & 3 and added to the 3D reconstruction.
5. The above procedure is repeated for adding camera 4 to obtain the final 3D reconstruction using all 4 cameras.

<br>
# Reconstruct your own Scene 
| Image 1 | Image 2 | Image 3 |
| ----------- | ----------- | ----------- |
| <img src="./imgs/taj1.bmp"> | <img src="./imgs/taj2.bmp"> | <img src="./imgs/taj3.bmp"> |

<img src="./output/q3-2.gif"> 

| Image 1 | Image 2 | Image 3 |
| ----------- | ----------- | ----------- |
| <img src="./imgs/camel1.bmp"> | <img src="./imgs/camel2.bmp"> | <img src="./imgs/camel3.bmp"> |

<img src="./output/q3-1.gif"> 

<!--- Markdeep & image comparison library - probably no need to change anything below -->
<style class="fallback">body{visibility:hidden;white-space:pre;font-family:monospace}</style><script src="./resources/markdeep.min.js"></script><script>window.alreadyProcessedMarkdeep||(document.body.style.visibility="visible")</script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
<script src="./resources/jquery.event.move.js"></script>
<script src="./resources/jquery.twentytwenty.js"></script>
<link href="./resources/offcanvas.css" rel="stylesheet">
<link href="./resources/twentytwenty.css" rel="stylesheet" type="text/css" />
<script>
$(window).load(function(){$(".twentytwenty-container").twentytwenty({default_offset_pct: 0.5});});
</script>
